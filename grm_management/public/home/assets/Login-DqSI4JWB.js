var F=Object.defineProperty;var b=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var j=(e,a,t)=>a in e?F(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,x=(e,a)=>{for(var t in a||(a={}))R.call(a,t)&&j(e,t,a[t]);if(b)for(var t of b(a))C.call(a,t)&&j(e,t,a[t]);return e};var g=(e,a,t)=>new Promise((n,r)=>{var u=i=>{try{l(t.next(i))}catch(d){r(d)}},o=i=>{try{l(t.throw(i))}catch(d){r(d)}},l=i=>i.done?n(i.value):Promise.resolve(i.value).then(u,o);l((t=t.apply(e,a)).next())});import{K as E,ab as G,N as T,r as c,O as y,aI as I,a0 as M,a1 as _,u as S,g as m,j as s,aJ as B,aK as h,aL as w,a8 as v,L as O,B as P,aM as V,t as A}from"./index-MKCxXVAg.js";import{G as D}from"./GetOneSeoPageHook-Cjt6gePU.js";import{S as H}from"./PageHelmet-Cw5kPi4y.js";function K(){const e=E(),a=G(),{isLoading:t,error:n,user:r,authChecked:u,home_page:o}=T(i=>i.auth),l=i=>g(null,null,function*(){e(I(i))});return c.useEffect(()=>{const i=n==null?void 0:n.message;i&&y.error(i)},[n]),c.useEffect(()=>{!t&&r&&o&&(o==="/home"?a("/profile"):window.location.href=o)},[t,r,o]),{loginSubmit:l,isLoading:t,error:n,user:r,authChecked:u}}function W(){const e=c.useRef(null),{loginSubmit:a}=K(),{register:t,handleSubmit:n,formState:{errors:r,isSubmitting:u,isValid:o,submitCount:l},setFocus:i}=M({resolver:_(V),mode:"onSubmit",defaultValues:{username:"",password:""}}),d=c.useMemo(()=>["[data-anim='title']","[data-anim='username']","[data-anim='password']","[data-anim='btn']"],[]);S(()=>{if(!e.current)return;const f=m.context(()=>{m.fromTo(e.current,{opacity:0,y:14,filter:"blur(6px)"},{opacity:1,y:0,filter:"blur(0px)",duration:.6,ease:"power3.out"}),m.fromTo(d.map(p=>e.current.querySelector(p)).filter(Boolean),{opacity:0,y:10},{opacity:1,y:0,duration:.5,stagger:.08,ease:"power2.out",delay:.05})},e);return()=>f.revert()},[d]);const N=()=>{e.current&&m.fromTo(e.current,{x:0},{x:-8,duration:.06,yoyo:!0,repeat:5,ease:"power1.inOut"})},k=$=>g(null,[$],function*({username:f,password:p}){yield a({usr:f,pwd:p}),y.success("تم تسجيل الدخول بنجاح")}),L=()=>{N(),r.username?i("username"):r.password&&i("password")};return s.jsx("form",{ref:e,className:"flex flex-col gap-6",onSubmit:n(k,L),noValidate:!0,children:s.jsxs(B,{children:[s.jsxs("div",{className:"flex flex-col items-center gap-1 text-center","data-anim":"title",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"سجّل الدخول إلى حسابك"}),s.jsx("p",{className:"text-muted-foreground text-sm text-balance",children:"اكتب بريدك الإلكتروني بالأسفل لتسجيل الدخول إلى حسابك"})]}),s.jsxs(h,{"data-anim":"username",children:[s.jsx(w,{htmlFor:"username",children:"اسم المستخدم"}),s.jsx(v,x({id:"username",type:"text",placeholder:"اسم المستخدم",autoComplete:"username","aria-invalid":!!r.username,className:r.username?"border-destructive focus-visible:ring-destructive":""},t("username"))),r.username&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:r.username.message})]}),s.jsxs(h,{"data-anim":"password",children:[s.jsx(w,{htmlFor:"password",children:"كلمة المرور"}),s.jsx(v,x({id:"password",type:"password",autoComplete:"current-password","aria-invalid":!!r.password,className:r.password?"border-destructive focus-visible:ring-destructive":""},t("password"))),r.password&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:r.password.message}),s.jsx("div",{className:"flex justify-between items-center",children:s.jsx(O,{to:"/sign-up",className:"text-sm underline-offset-4 transition-colors duration-300 hover:underline text-gray-400",children:"هل لديك حساب؟ سجل حساب جديد"})})]}),s.jsx(h,{"data-anim":"btn",children:s.jsx(P,{type:"submit",disabled:u||l>0&&!o,children:u?"جاري تسجيل الدخول...":"تسجيل الدخول"})})]})})}function q(){const e=c.useRef(null),a=c.useRef(null);return S(()=>{if(!e.current||!a.current)return;const t=m.context(()=>{m.fromTo(a.current,{opacity:0,scale:1.08,filter:"blur(8px)"},{opacity:1,scale:1,filter:"blur(0px)",duration:1.2,ease:"power3.out",delay:.2})},e);return()=>t.revert()},[]),s.jsxs("section",{className:"grid min-h-svh lg:grid-cols-2",children:[s.jsx("div",{className:"flex flex-col gap-4 p-6 md:p-10",children:s.jsx("div",{className:"flex flex-1 items-center justify-center",children:s.jsx("div",{className:"w-full max-w-sm",children:s.jsx(W,{})})})}),s.jsx("div",{ref:e,className:"bg-muted relative hidden overflow-hidden lg:block",children:s.jsx("img",{ref:a,src:A,alt:"login image",className:"absolute inset-0 h-full w-full object-cover dark:brightness-[0.2] dark:grayscale will-change-transform"})})]})}const X=()=>{const{metaData:e}=D("login");return c.useEffect(()=>{H({title:e.title_ar,description:e.description_ar,keywords:e.keywords_ar})},[e]),s.jsx(q,{})};export{X as default};
