var O=Object.defineProperty;var S=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var C=(s,r,a)=>r in s?O(s,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[r]=a,m=(s,r)=>{for(var a in r||(r={}))U.call(r,a)&&C(s,a,r[a]);if(S)for(var a of S(r))B.call(r,a)&&C(s,a,r[a]);return s};var w=(s,r,a)=>new Promise((f,h)=>{var o=p=>{try{n(a.next(p))}catch(t){h(t)}},j=p=>{try{n(a.throw(p))}catch(t){h(t)}},n=p=>p.done?f(p.value):Promise.resolve(p.value).then(o,j);n((a=a.apply(s,r)).next())});import{h as T,K as $,N as A,r as u,O as M,aN as D,ab as H,a0 as K,a1 as W,u as P,g as _,j as e,aJ as q,aK as c,aL as d,a8 as x,L as J,B as Q,aO as X,t as Y}from"./index-MKCxXVAg.js";import{S as Z,a as ee,b as te,c as se,d as k}from"./select-DN__f3rb.js";import{G as ae}from"./GetOneSeoPageHook-Cjt6gePU.js";import{S as ie}from"./PageHelmet-Cw5kPi4y.js";const re=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],F=T("eye-off",re);const ne=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],I=T("eye",ne);function oe(){const s=$(),{loading:r,error:a,user:f}=A(o=>o.auth),h=o=>w(null,null,function*(){return s(D(o)).unwrap()});return u.useEffect(()=>{const o=a==null?void 0:a.message;o&&M.error(o)},[a]),{signUpSubmit:h,loading:r,error:a,user:f}}function ce(){const s=u.useRef(null),r=H(),{signUpSubmit:a}=oe(),[f,h]=u.useState(!1),[o,j]=u.useState(!1),{register:n,handleSubmit:p,formState:{errors:t,isSubmitting:b,isValid:R,submitCount:V},setFocus:l,watch:E,setValue:y}=K({resolver:W(X),mode:"onSubmit",defaultValues:{first_name:"",last_name:"",email:"",password:"",phone:"",confirm_password:"",tenant_type:"Individual",company_name:"",commercial_registration:"",tax_id:""}}),v=E("tenant_type"),N=u.useMemo(()=>["[data-anim='title']","[data-anim='tenant_type']","[data-anim='first_name']","[data-anim='last_name']","[data-anim='email']","[data-anim='phone']","[data-anim='password']","[data-anim='confirm_password']","[data-anim='company_fields']","[data-anim='btn']"],[]);P(()=>{if(!s.current)return;const i=_.context(()=>{_.fromTo(s.current,{opacity:0,y:14,filter:"blur(6px)"},{opacity:1,y:0,filter:"blur(0px)",duration:.6,ease:"power3.out"}),_.fromTo(N.map(g=>s.current.querySelector(g)).filter(Boolean),{opacity:0,y:10},{opacity:1,y:0,duration:.5,stagger:.08,ease:"power2.out",delay:.05})},s);return()=>i.revert()},[N]);const z=()=>{s.current&&_.fromTo(s.current,{x:0},{x:-8,duration:.06,yoyo:!0,repeat:5,ease:"power1.inOut"})},G=i=>w(null,null,function*(){try{const g=i.tenant_type==="Company"?{first_name:i.first_name,last_name:i.last_name,email:i.email,password:i.password,phone:i.phone,tenant_type:"Company",company_name:i.company_name,commercial_registration:i.commercial_registration,tax_id:i.tax_id}:{first_name:i.first_name,last_name:i.last_name,email:i.email,password:i.password,phone:i.phone,tenant_type:"Individual"};yield a(g),M.success("تم تسجيل الحساب بنجاح"),setTimeout(()=>r("/login"),1e3)}catch(g){console.log(g)}}),L=()=>{z(),t.tenant_type?l("tenant_type"):t.first_name?l("first_name"):t.last_name?l("last_name"):t.email?l("email"):t.phone?l("phone"):t.password?l("password"):t.confirm_password?l("confirm_password"):v==="Company"&&(t.company_name?l("company_name"):t.commercial_registration?l("commercial_registration"):t.tax_id&&l("tax_id"))};return e.jsx("form",{ref:s,className:"flex flex-col gap-6",onSubmit:p(G,L),noValidate:!0,children:e.jsxs(q,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-1 text-center","data-anim":"title",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"سجّل حساب جديد"}),e.jsx("p",{className:"text-muted-foreground text-sm text-balance",children:"اكتب بياناتك بالأسفل لإنشاء حساب جديد والبدء في استخدام المنصة"})]}),e.jsxs(c,{"data-anim":"tenant_type",children:[e.jsx(d,{children:"نوع الحساب"}),e.jsxs(Z,{value:v,onValueChange:i=>{y("tenant_type",i,{shouldValidate:!0}),i==="Individual"&&(y("company_name",""),y("commercial_registration",""),y("tax_id",""))},children:[e.jsx(ee,{"aria-invalid":!!t.tenant_type,children:e.jsx(te,{placeholder:"اختر نوع الحساب"})}),e.jsxs(se,{children:[e.jsx(k,{value:"Individual",children:"فرد"}),e.jsx(k,{value:"Company",children:"شركة"})]})]}),t.tenant_type&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:String(t.tenant_type.message)})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:[e.jsxs(c,{"data-anim":"first_name",children:[e.jsx(d,{htmlFor:"first_name",children:"الاسم الأول"}),e.jsx(x,m({id:"first_name",type:"text",autoComplete:"given-name","aria-invalid":!!t.first_name,className:t.first_name?"border-destructive focus-visible:ring-destructive":""},n("first_name"))),t.first_name&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:t.first_name.message})]}),e.jsxs(c,{"data-anim":"last_name",children:[e.jsx(d,{htmlFor:"last_name",children:"اسم العائلة"}),e.jsx(x,m({id:"last_name",type:"text",autoComplete:"family-name","aria-invalid":!!t.last_name,className:t.last_name?"border-destructive focus-visible:ring-destructive":""},n("last_name"))),t.last_name&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:t.last_name.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:[e.jsxs(c,{"data-anim":"email",children:[e.jsx(d,{htmlFor:"email",children:"الإيميل"}),e.jsx(x,m({id:"email",type:"email",placeholder:"m@example.com",autoComplete:"email","aria-invalid":!!t.email,className:t.email?"border-destructive focus-visible:ring-destructive":""},n("email"))),t.email&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:t.email.message})]}),e.jsxs(c,{"data-anim":"phone",children:[e.jsx(d,{htmlFor:"phone",children:"رقم الهاتف"}),e.jsx(x,m({id:"phone",type:"text",placeholder:"+9665xxxxxxxx",autoComplete:"tel","aria-invalid":!!t.phone,className:t.phone?"border-destructive focus-visible:ring-destructive":""},n("phone"))),t.phone&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:t.phone.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:[e.jsxs(c,{"data-anim":"password",children:[e.jsx(d,{htmlFor:"password",children:"كلمة المرور"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,m({id:"password",type:f?"text":"password",autoComplete:"new-password","aria-invalid":!!t.password,className:`pr-10 ${t.password?"border-destructive focus-visible:ring-destructive":""}`},n("password"))),e.jsx("button",{type:"button",onClick:()=>h(i=>!i),className:"absolute inset-y-0 end-2 flex items-center text-muted-foreground hover:text-foreground",tabIndex:-1,children:f?e.jsx(F,{size:18}):e.jsx(I,{size:18})})]}),t.password&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:t.password.message})]}),e.jsxs(c,{"data-anim":"confirm_password",children:[e.jsx(d,{htmlFor:"confirm_password",children:"تأكيد كلمة المرور"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,m({id:"confirm_password",type:o?"text":"password",autoComplete:"new-password","aria-invalid":!!t.confirm_password,className:`pr-10 ${t.confirm_password?"border-destructive focus-visible:ring-destructive":""}`},n("confirm_password"))),e.jsx("button",{type:"button",onClick:()=>j(i=>!i),className:"absolute inset-y-0 end-2 flex items-center text-muted-foreground hover:text-foreground",tabIndex:-1,children:o?e.jsx(F,{size:18}):e.jsx(I,{size:18})})]}),t.confirm_password&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:t.confirm_password.message})]})]}),v==="Company"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1","data-anim":"company_fields",children:[e.jsxs(c,{children:[e.jsx(d,{htmlFor:"company_name",children:"اسم الشركة"}),e.jsx(x,m({id:"company_name",type:"text","aria-invalid":!!t.company_name,className:t.company_name?"border-destructive focus-visible:ring-destructive":""},n("company_name"))),t.company_name&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:String(t.company_name.message)})]}),e.jsxs(c,{children:[e.jsx(d,{htmlFor:"commercial_registration",children:"السجل التجاري"}),e.jsx(x,m({id:"commercial_registration",type:"text","aria-invalid":!!t.commercial_registration,className:t.commercial_registration?"border-destructive focus-visible:ring-destructive":""},n("commercial_registration"))),t.commercial_registration&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:String(t.commercial_registration.message)})]}),e.jsxs(c,{className:"sm:col-span-2",children:[e.jsx(d,{htmlFor:"tax_id",children:"الرقم الضريبي"}),e.jsx(x,m({id:"tax_id",type:"text","aria-invalid":!!t.tax_id,className:t.tax_id?"border-destructive focus-visible:ring-destructive":""},n("tax_id"))),t.tax_id&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:String(t.tax_id.message)})]})]}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsx(J,{to:"/login",className:"text-sm underline-offset-4 transition-colors duration-300 hover:underline text-gray-400",children:"هل لديك حساب؟ سجل الدخول"})}),e.jsx(c,{"data-anim":"btn",children:e.jsx(Q,{type:"submit",disabled:b||V>0&&!R,children:b?"جاري تسجيل الحساب...":"تسجيل الحساب"})})]})})}function le(){const s=u.useRef(null),r=u.useRef(null);return P(()=>{if(!s.current||!r.current)return;const a=_.context(()=>{_.fromTo(r.current,{opacity:0,scale:1.08,filter:"blur(8px)"},{opacity:1,scale:1,filter:"blur(0px)",duration:1.2,ease:"power3.out",delay:.2})},s);return()=>a.revert()},[]),e.jsxs("section",{className:"grid min-h-svh lg:grid-cols-2",children:[e.jsx("div",{className:"flex flex-col gap-4 p-6 md:p-10",children:e.jsx("div",{className:"flex flex-1 items-center justify-center",children:e.jsx("div",{className:"w-full",children:e.jsx(ce,{})})})}),e.jsx("div",{ref:s,className:"bg-muted relative hidden overflow-hidden lg:block",children:e.jsx("img",{ref:r,src:Y,alt:"login image",className:"absolute inset-0 h-full w-full object-cover dark:brightness-[0.2] dark:grayscale will-change-transform"})})]})}const fe=()=>{const{metaData:s}=ae("signup");return u.useEffect(()=>{ie({title:s.title_ar,description:s.description_ar,keywords:s.keywords_ar})},[s]),e.jsx(le,{})};export{fe as default};
